{"version":3,"sources":["../../../../node_modules/save/test/delete.js"],"names":["module","exports","idProperty","getEngine","describe","it","done","error","engine","create","a","insertedObject","delete","undefined","should","equal","find","objects","length","eql","on","entity","not","throwError"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,UAASC,UAAT,EAAqBC,SAArB,EAAgC;;AAE/CC,WAAS,WAAT,EAAsB,YAAY;;AAEhCC,OAAG,0BAAH,EAA+B,UAAUC,IAAV,EAAgB;AAC7CH,gBAAU,UAAUI,KAAV,EAAiBC,MAAjB,EAAyB;AACjCA,eAAOC,MAAP,CAAc,EAAEC,GAAG,CAAL,EAAd,EAAwB,UAAUH,KAAV,EAAiBI,cAAjB,EAAiC;AACvDH,iBAAOI,MAAP,CAAcD,eAAeT,UAAf,CAAd,EAA0C,UAAUK,KAAV,EAAiB;AACzD,aAACA,UAAUM,SAAX,EAAsBC,MAAtB,CAA6BC,KAA7B,CAAmC,IAAnC;AACAP,mBAAOQ,IAAP,CAAYL,cAAZ,EAA4B,EAA5B,EAAgC,UAAUJ,KAAV,EAAiBU,OAAjB,EAA0B;;AAExDA,sBAAQC,MAAR,CAAeJ,MAAf,CAAsBK,GAAtB,CAA0B,CAA1B;AACAb;AACD,aAJD;AAKD,WAPD;AAQD,SATD;AAUD,OAXD;AAYD,KAbD;;AAeAD,OAAG,gCAAH,EAAqC,UAAUC,IAAV,EAAgB;AACnDH,gBAAU,UAAUI,KAAV,EAAiBC,MAAjB,EAAyB;AACjCA,eAAOC,MAAP,CAAc,EAAEC,GAAG,CAAL,EAAd,EAAwB,UAAUH,KAAV,EAAiBI,cAAjB,EAAiC;AACvDH,iBAAOY,EAAP,CAAU,QAAV,EAAoB,UAAUC,MAAV,EAAkB;AACpCA,mBAAOP,MAAP,CAAcK,GAAd,CAAkBR,eAAeT,UAAf,CAAlB;AACAI;AACD,WAHD;AAIAE,iBAAOI,MAAP,CAAcD,eAAeT,UAAf,CAAd;AACD,SAND;AAOD,OARD;AASD,KAVD;;AAYAG,OAAG,qCAAH,EAA0C,UAAUC,IAAV,EAAgB;AACxDH,gBAAU,UAAUI,KAAV,EAAiBC,MAAjB,EAAyB;AACjCA,eAAOC,MAAP,CAAc,EAAEC,GAAG,CAAL,EAAd,EAAwB,UAAUH,KAAV,EAAiBI,cAAjB,EAAiC;AACvDH,iBAAOY,EAAP,CAAU,aAAV,EAAyB,UAAUC,MAAV,EAAkB;AACzCA,mBAAOP,MAAP,CAAcK,GAAd,CAAkBR,eAAeT,UAAf,CAAlB;AACAI;AACD,WAHD;AAIAE,iBAAOI,MAAP,CAAcD,eAAeT,UAAf,CAAd;AACD,SAND;AAOD,OARD;AASD,KAVD;;AAYAG,OAAG,0BAAH,EAA+B,YAAY;AACzCF,gBAAU,UAAUI,KAAV,EAAiBC,MAAjB,EAAyB;AACjC,SAAC,YAAY;AACXA,iBAAOI,MAAP,CAAc,CAAd;AACD,SAFD,EAEGE,MAFH,CAEUQ,GAFV,CAEcC,UAFd;AAGD,OAJD;AAKD,KAND;;AAQAlB,OAAG,sDAAH,EAA2D,YAAY;AACrEF,gBAAU,UAAUI,KAAV,EAAiBC,MAAjB,EAAyB;AACjC,SAAC,YAAY;AACXA,iBAAOI,MAAP,CAAc,CAAd,EAAiB,EAAjB;AACD,SAFD,EAEGE,MAFH,CAEUS,UAFV,CAEqB,sCAFrB;AAGD,OAJD;AAKD,KAND;AAOD,GAxDD;AAyDD,CA3DD","file":"delete.js","sourcesContent":["module.exports = function(idProperty, getEngine) {\n\n  describe('#delete()', function () {\n\n    it('should delete the entity', function (done) {\n      getEngine(function (error, engine) {\n        engine.create({ a: 1 }, function (error, insertedObject) {\n          engine.delete(insertedObject[idProperty], function (error) {\n            (error === undefined).should.equal(true)\n            engine.find(insertedObject, {}, function (error, objects) {\n\n              objects.length.should.eql(0)\n              done()\n            })\n          })\n        })\n      })\n    })\n\n    it('should emit a \\'delete\\' event', function (done) {\n      getEngine(function (error, engine) {\n        engine.create({ a: 1 }, function (error, insertedObject) {\n          engine.on('delete', function (entity) {\n            entity.should.eql(insertedObject[idProperty])\n            done()\n          })\n          engine.delete(insertedObject[idProperty])\n        })\n      })\n    })\n\n    it('should emit a \\'afterDelete\\' event', function (done) {\n      getEngine(function (error, engine) {\n        engine.create({ a: 1 }, function (error, insertedObject) {\n          engine.on('afterDelete', function (entity) {\n            entity.should.eql(insertedObject[idProperty])\n            done()\n          })\n          engine.delete(insertedObject[idProperty])\n        })\n      })\n    })\n\n    it('should allow no callback', function () {\n      getEngine(function (error, engine) {\n        (function () {\n          engine.delete(1)\n        }).should.not.throwError()\n      })\n    })\n\n    it('should throw TypeError if callback is not a function', function () {\n      getEngine(function (error, engine) {\n        (function () {\n          engine.delete(1, {})\n        }).should.throwError('callback must be a function or empty')\n      })\n    })\n  })\n}\n"]}