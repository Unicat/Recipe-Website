{"version":3,"sources":["../../../../node_modules/save/test/find.js"],"names":["_","require","async","should","assert","module","exports","idProperty","getEngine","describe","it","done","error","engine","find","a","objects","length","eql","on","entity","map","create","data","equal","not","b","exist","findTest","$gt","$lt","$in","nested","c","fields","sort","object","_id","limit","item","dataClone","clone","createdObject","have","property","read","be","type"],"mappings":"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","file":"find.js","sourcesContent":["var _ = require('lodash')\n  , async = require('async')\n  , should = require('should')\n  , assert = require('assert')\n\nmodule.exports = function(idProperty, getEngine) {\n\n  describe('#find()', function () {\n\n    it('should return empty array when no data matches query ', function (done) {\n      getEngine(function (error, engine) {\n        engine.find({ a: 1 }, {}, function (error, objects) {\n\n          objects.length.should.eql(0)\n          done()\n        })\n      })\n\n    })\n\n    it('should emit a \\'find\\' event', function (done) {\n      getEngine(function (error, engine) {\n        engine.on('find', function (entity) {\n          entity.should.eql({ a: 1 })\n          done()\n        })\n\n        engine.find({ a: 1 }, {}, function () {\n        })\n\n      })\n    })\n\n    it('should emit a \\'received\\' event', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 1 } ], engine.create, function () {\n\n          engine.on('received', function (data) {\n            assert.equal(data.length, 1)\n            assert.equal(data[0].a, 1)\n            done()\n          })\n\n          engine.find({ a: 1 }, {}, function () {\n          })\n\n        })\n      })\n    })\n\n    it('should return array of objects for a single clause query that matches existing objects', function (done) {\n\n      getEngine(function (error, engine) {\n        async.map([ { a: 1 } ], engine.create, function () {\n          engine.find({ a: 1 }, {}, function (error, objects) {\n            objects.length.should.not.eql(0)\n            objects[0].a.should.equal(1)\n            done()\n          })\n        })\n      })\n\n    })\n\n    it('should still return expected objects when callback is second parameter', function (done) {\n\n      getEngine(function (error, engine) {\n        async.map([ { a: 1 } ], engine.create, function () {\n          engine.find({ a: 1 }, function (error, objects) {\n            objects.length.should.not.eql(0)\n            objects[0].a.should.equal(1)\n            done()\n          })\n        })\n      })\n\n    })\n\n    it('should not error if a query property is not in object collection', function (done) {\n\n      getEngine(function (error, engine) {\n        async.map([ { a: 1 } ], engine.create, function () {\n          engine.find({ b: 1 }, {}, function (error, objects) {\n            should.not.exist(error)\n            objects.length.should.eql(0)\n            done()\n          })\n        })\n      })\n\n    })\n\n    it('should return array of objects that match all properties in query ', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { findTest: 1 }, { findTest: 1 }, { findTest: 1 }, { b: 1 } ], engine.create, function () {\n          engine.find({ findTest: 1 }, {}, function (error, objects) {\n            objects.length.should.equal(3)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should allow $gt operator', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { findTest: 1 }, { findTest: 2 }, { findTest: 3 }, { findTest: 4 } ], engine.create, function () {\n          engine.find({ findTest: { $gt: 2 } }, function (error, objects) {\n            objects.length.should.equal(2)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should allow $lt operator', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { findTest: 0.8 }, { findTest: 1.9 }, { findTest: 3 }, { findTest: 4 } ], engine.create, function () {\n          engine.find({ findTest: { $lt: 2 } }, function (error, objects) {\n            objects.length.should.equal(2)\n            objects[0].findTest.should.equal(0.8)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return all objects with properties in a given array ($in)', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { findTest: 1 }, { findTest: 2 }, { findTest: 3 } ], engine.create, function () {\n          engine.find({ findTest: { $in: [ 1, 3 ] } }, {}, function (error, objects) {\n            objects.length.should.equal(2)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return array of objects that match specified fields of a subdocument in query', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { findTest: { nested: 1 } }, { findTest: { nested: 1 } }, { findTest: { nested: 2 } }, { b: 1 } ], engine.create, function () {\n          engine.find({ 'findTest.nested': 1 }, {}, function (error, objects) {\n            objects.length.should.equal(2)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return array of objects that match specified fields of a deep subdocument in query', function (done) {\n      getEngine(function (error, engine) {\n        async.map(\n            [ { findTest: { nested: 1 } }\n            , { findTest: { nested: { nested: 1 } } }\n            , { findTest: { nested: { nested: 1 } } }\n            , { b: 1 } ]\n            , engine.create, function () {\n          engine.find({ 'findTest.nested.nested': 1 }, {}, function (error, objects) {\n            objects.length.should.equal(2)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return array of all objects for an empty query {}', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 1 }, { a: 1 }, { a: 1 }, { b: 1 } ], engine.create, function () {\n          engine.find({}, {}, function (error, objects) {\n            objects.length.should.equal(4)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should support { fields: {} } projection in options', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 1, b: 1 }, { a: 2, b: 2 }, { b: 3, c: 3 }, { b: 4, c: 4 } ], engine.create, function () {\n          engine.find({}, { fields: { b: 1, c: 1 }, sort: { b: 1 } }, function (error, objects) {\n            objects.map(function(object) { delete object._id; return object })\n              .should.eql([ { b: 1 }, { b: 2 }, { b: 3, c: 3 }, { b: 4, c: 4 } ])\n            done()\n          })\n        })\n      })\n    })\n\n    it('should support { limit: n } property in options', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 1, b: 1 }, { a: 2, b: 2 }, { b: 3, c: 3 }, { b: 4, c: 4 } ], engine.create, function () {\n          engine.find({}, { fields: { b: 1, c: 1 }, limit: 1 }, function (error, objects) {\n            objects.map(function(object) { delete object._id; return object })\n              .should.eql([ { b: 1 } ])\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return array of all objects for an empty query {} when there are no options', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 1 }, { a: 1 }, { a: 1 }, { b: 1 } ], engine.create, function () {\n          engine.find({}, function (error, objects) {\n            objects.length.should.equal(4)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return array of objects in ascending order', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 3 }, { a: 1 }, { a: 2 } ], engine.create, function () {\n          engine.find({}, { sort: { a: 1 } }, function (error, objects) {\n            objects[0].a.should.equal(1)\n            objects[1].a.should.equal(2)\n            objects[2].a.should.equal(3)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return array of objects in descending order', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 3 }, { a: 1 }, { a: 2 } ], engine.create, function () {\n          engine.find({}, { sort: { a: -1 } }, function (error, objects) {\n            objects[0].a.should.equal(3)\n            objects[1].a.should.equal(2)\n            objects[2].a.should.equal(1)\n            done()\n          })\n        })\n      })\n    })\n\n    it('should return a new cloned object', function () {\n      var item = { a: 1 }\n        , dataClone = _.clone(item)\n\n      getEngine(function (error, engine) {\n        async.map([ item ], engine.create, function (error, createdObject) {\n          delete createdObject.a\n\n          createdObject[0].should.not.eql(dataClone)\n          item.should.have.property('a')\n          engine.read(createdObject[0]._id, function (error, item) {\n            item.should.have.property('a')\n            item.should.have.property('_id')\n          })\n        })\n      })\n    })\n\n    it('should return id of type string', function (done) {\n      getEngine(function (error, engine) {\n        async.map([ { a: 3 } ], engine.create, function () {\n          engine.find({}, { sort: [ [ 'a', 'desc' ] ] }, function (error, objects) {\n            objects[0][idProperty].should.be.type('string')\n            done()\n          })\n        })\n      })\n    })\n\n  })\n\n}\n"]}