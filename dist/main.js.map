{"version":3,"sources":["../main.js"],"names":["express","require","path","app","showRecipe","newHome","Ingredient","Login","RecipeSelect","Allergy","LogOut","Favourite","Cuisine","PrepTime","SearchTag","ServingSize","Type","Comments","ServingCon","multiline","mysql","bcrypt","connection","createConnection","host","user","password","database","port","String","prototype","format","content","i","arguments","length","replacement","replace","escape","get","req","res","send","use","static","__dirname","RecipeHtml","HeaderHtml","LoginHtml","LogoutHtml","SelectRecipeHtml","IngredientHtml","AllergyHtml","FavouriteHtml","CuisineHtml","PrepTimeHtml","SearchTagHtml","ServingSizeHtml","TypeHtml","CommentHtml","ServingConHtml","sendFile","response","Username","query","username","Password","Name","Pass","console","log","redirect","LoginQuery1","error","results","fields","undefined","PasswordHASH","PasswordSALT","IDAccount","IDAccountDetails","ToBeHashed","NumHash","charCodeAt","hash","date","Date","hour","getHours","min","getMinutes","sec","getSeconds","year","getFullYear","month","getMonth","day","getDate","DateTime","LoginQuery2","IDAllergyGroup","set","logout","Logout","EmailAddress","emailaddress","PasswordConfirmation","passwordconfirmation","AllergyType","allergy","Email","Pass1","Pass2","AtSymbol","SignUpQuery1","randomString","chars","salt","Math","floor","random","Salt","SignUpQuery2","AllergyQuery1","comment","Rating","rating","IDRecipe","ingredient","searchtag","cuisine","preptime","type","servingsize","favourite","serving","ServingChange","listen"],"mappings":"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","file":"main.js","sourcesContent":["var express = require('express');\nvar path = require('path');\nvar app = express();\n\nvar showRecipe = require('./Recipe/Recipe');\nvar newHome = require('./test/newHome');\nvar Ingredient = require('./Filter/Ingredient/Ingredient');\nvar Login = require('./Login/Login');\nvar RecipeSelect = require('./RecipeSelect/RecipeSelect');\nvar Allergy = require('./Allergy/Allergy');\nvar LogOut = require('./Logout/Logout');\n\nvar Favourite = require('./Favourites/Favourite');\nvar Cuisine = require('./Filter/Cuisine/Cuisine');\nvar PrepTime = require('./Filter/PrepTime/PrepTime');\nvar SearchTag = require('./Filter/SearchTags/SearchTag');\nvar ServingSize = require('./Filter/ServingSize/ServingSize');\nvar Type = require('./Filter/Type/Type');\nvar Comments = require('./Comment/Comment');\nvar ServingCon = require('./ServingConversion/ServingCon');\n\nvar multiline = require('multiline');\nvar mysql = require('mysql');\nvar bcrypt = require('bcrypt-nodejs');\nvar connection = mysql.createConnection({\n    host: 'localhost',\n    user: 'Recipe',\n    password: 'helloworld123',\n    database: 'RecipeWebsite',\n    port: 8889\n});\n\nString.prototype.format = function()\n// From https://journalofasoftwaredev.wordpress.com/2011/10/30/replicating-string-format-in-javascript/\n{\n    var content = this;\n    for (var i=0; i < arguments.length; i++)\n    {\n        var replacement = '{' + i + '}';\n        content = content.replace(replacement, mysql.escape(arguments[i]));\n    }\n    return content;\n};\n\napp.get('/oldtry', function (req, res) {\n    res.send('Is anyone out there?');\n});\n\n//Path Names/Routes\n\napp.use('/vendor', express.static(__dirname + '/vendor'));\napp.use('/js', express.static(__dirname + '/js'));\napp.use('/img', express.static(__dirname + '/img'));\napp.use('/video', express.static(__dirname + '/video'));\napp.use('/recipetry/video', express.static(__dirname + '/video'));\napp.use('/css', express.static(__dirname + '/css'));\napp.use('/recipetry/css', express.static(__dirname + '/css'));\n\napp.use('/recipetry', showRecipe.RecipeHtml);\n\napp.use('/try', newHome.HeaderHtml);\n\napp.use('/logintry', Login.LoginHtml);\n\napp.use('/logouttry', LogOut.LogoutHtml);\n\napp.use('/selecttry', RecipeSelect.SelectRecipeHtml);\n\napp.use('/ingredienttry', Ingredient.IngredientHtml);\n\napp.use('/allergytry', Allergy.AllergyHtml);\n\napp.use('/favouritetry', Favourite.FavouriteHtml);\n\napp.use('/cuisinetry', Cuisine.CuisineHtml);\n\napp.use('/preptimetry', PrepTime.PrepTimeHtml);\n\napp.use('/searchtagtry', SearchTag.SearchTagHtml);\n\napp.use('/servingsizetry', ServingSize.ServingSizeHtml);\n\napp.use('/typetry', Type.TypeHtml);\n\napp.use('/commenttry', Comments.CommentHtml);\n\napp.use('/servingcontry', ServingCon.ServingConHtml);\n\n//Getting information back from the files\n\napp.get('/Login/Login.js', function (req, res) {\n    res.sendFile(__dirname + \"/Login/\" + \"Login.js\");\n});\n\napp.get('/Logout/Logout.js', function (req, res) {\n    res.sendFile(__dirname + \"/Logout/\" + \"Logout.js\");\n});\n\napp.get('/Allergy/allergy.js', function (req, res) {\n    res.sendFile(__dirname + \"/Allergy/\" + \"allergy.js\");\n});\n\napp.get('/Comment/Comment.js', function (req, res) {\n    res.sendFile(__dirname + \"/Comment/\" + \"Comment.js\");\n});\n\napp.get('/Filter/Ingredient/Ingredient.js', function (req, res) {\n    res.sendFile(__dirname + \"/Filter/Ingredient/\" + \"Ingredient.js\");\n});\n\napp.get('/Filter/Cuisine/Cuisine.js', function (req, res) {\n    res.sendFile(__dirname + \"/Filter/Cuisine/\" + \"Cuisine.js\");\n});\n\napp.get('/Filter/PrepTime/PrepTime.js', function (req, res) {\n    res.sendFile(__dirname + \"/Filter/PrepTime/\" + \"PrepTime.js\");\n});\n\napp.get('/Filter/SearchTags/SearchTag.js', function (req, res) {\n    res.sendFile(__dirname + \"/Filter/SearchTags/\" + \"SearchTag.js\");\n});\n\napp.get('/Filter/ServingSize/ServingSize.js', function (req, res) {\n    res.sendFile(__dirname + \"/Filter/ServingSize/\" + \"ServingSize.js\");\n});\n\napp.get('/Filter/Type/Type.js', function (req, res) {\n    res.sendFile(__dirname + \"/Filter/Type/\" + \"Type.js\");\n});\n\napp.get('/Favourite/Favourite.js', function (req, res) {\n    res.sendFile(__dirname + \"/Favourite/\" + \"Favourite.js\");\n});\n\napp.get('/ServingConversion/ServingCon.js', function (req, res) {\n    res.sendFile(__dirname + \"/ServingConversion/\" + \"ServingCon.js\");\n});\n\napp.get('/process_login', function (req, res) {\n    // Prepare output in JSON format\n    response = {\n        Username: req.query.username,\n        Password: req.query.password\n    };\n    var Name = req.query.username;     //Data from User\n    var Pass = req.query.password;\n    console.log(response);\n\n    //Not Valid Input Section\n    if (Name === ''&& Pass === '') {\n         return res.redirect('/logintry?Valid=Both');     //Redirects user to login page\n    }\n    if (Name === '') {\n        return res.redirect('/logintry?Valid=Name');     //Redirects user to login page\n    }\n    else if (Pass === '') {\n        return res.redirect('/logintry?Valid=Pass');     //Redirects user to login page\n    }\n\n    var LoginQuery1 = 'SELECT * FROM tblAccountDetails WHERE UserName = {0}'.format(Name);\n    connection.query(LoginQuery1, function (error, results, fields) {\n        if (error) {\n            console.log(\"An error has occurred at LoginQuery1.\");\n            console.log(error);\n        }\n        else if(results.length===0){\n            return res.redirect('/logintry?Valid=Name');\n        }\n        else{\n            //Hashing Function\n            if (typeof(results[0]) === undefined || typeof(results[0].PasswordHASH) === undefined ){\n                return res.redirect('/logintry?Valid=Name');\n            }\n            console.log('PasswordHASH: ', results[0].PasswordHASH);\n            console.log('PasswordSALT: ', results[0].PasswordSALT);\n            var IDAccount = results[0].IDAccountDetails;\n            var ToBeHashed = Pass + results[0].PasswordSALT;\n\n            var NumHash = 0;\n\n            for (var i = 0; i < ToBeHashed.length; i++) {\n                console.log(ToBeHashed.charCodeAt(i));\n                NumHash = NumHash + ToBeHashed.charCodeAt(i);   //find the ascii for the password given\n            }\n            var hash = NumHash % 12;\n\n            //Finds the current time and creates a cookie\n\n            if (hash === results[0].PasswordHASH) {\n                var date = new Date();\n\n                var hour = date.getHours();\n                hour = (hour < 10 ? \"0\" : \"\") + hour;\n\n                var min = date.getMinutes();\n                min = (min < 10 ? \"0\" : \"\") + min;\n\n                var sec = date.getSeconds();\n                sec = (sec < 10 ? \"0\" : \"\") + sec;\n\n                var year = date.getFullYear();\n\n                var month = date.getMonth() + 1;\n                month = (month < 10 ? \"0\" : \"\") + month;\n\n                var day  = date.getDate();\n                day = (day < 10 ? \"0\" : \"\") + day;\n\n                var DateTime = year + \":\" + month + \":\" + day + \":\" + hour + \":\" + min + \":\" + sec;\n                //connection.query('INSERT INTO RecipeWebsite.tblCookieDetails (IDAccountDetails, ExpiryDateTime) VALUES (?, ?);', [results[0].IDAccountDetails, DateTime]);\n                var LoginQuery2 = 'SELECT IDAllergyGroup FROM tblAllergyGroupAccountDetails WHERE IDAccountDetails = {0}'.format(IDAccount);\n                connection.query(LoginQuery2, function (error, results, fields) {\n                    if(results.length>0){\n                        IDAllergyGroup = results[0].IDAllergyGroup;\n                        app.set('IDAllergyGroup', IDAllergyGroup);      //Set global variable\n                        app.set('IDAccount', IDAccount);      //Set global variable\n                        return res.redirect(301, 'http://localhost:3000/try');     //Redirects user to the recipe select page\n                        }\n                    else{\n                        app.set('IDAccount', IDAccount);      //Set global variable\n                        return res.redirect(301, 'http://localhost:3000/try');     //Redirects user to the recipe select page\n                    }\n\n                });\n\n            }\n            else {\n                return res.redirect('http://localhost:3000/logintry?Valid=Pass');      //Redirects user to login page\n            }\n        }\n    });\n});\n\napp.get('/process_logout', function (req, res) {\n    response = {\n        logout: req.query.logout\n    };\n    var Logout = req.query.Logout;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (Logout === undefined) {\n        return res.redirect('/logouttry/?Valid=Logout');      //Redirects user to the logout page\n    }\n    else if (Logout === 'false'){\n        return res.redirect('/try');\n    }\n    else{\n        app.set('IDAccount', undefined);\n        app.set('IDAllergyGroup', undefined);\n        return res.redirect('/try');\n    }\n});\n\n//SignUp and Allergy Input Code\napp.get('/process_allergy', function (req, res) {\n    app.set('IDAllergyGroup', undefined);     //Set global variable\n    app.set('IDAccount', undefined);     //Set global variable\n    response = {\n        Username: req.query.username,\n        EmailAddress: req.query.emailaddress,\n        Password: req.query.password,\n        PasswordConfirmation: req.query.passwordconfirmation,\n        AllergyType: req.query.allergy\n    };\n    var Name = req.query.username;\n    var Email = req.query.emailaddress;    //Data from User\n    var Pass1 = req.query.password;\n    var Pass2 = req.query.passwordconfirmation;\n    var AllergyType = req.query.allergy;\n    console.log(response);\n\n    //Not valid Input Section\n\n    var AtSymbol = false;\n    for (var i = 0; i < Email.length; i++) {     //Makes sure Email is valid\n        if (Email[i] === '@') {\n            AtSymbol = true;\n        }\n    }\n    if (Email === '' || (AtSymbol === false)) {\n        return res.redirect('/allergytry?Valid=Email');     //Redirects user to Allergy/SignUp page\n    }\n    else if (Name === '') {\n        return res.redirect('/allergytry?Valid=Name');     //Redirects user to Allergy/SignUp page\n    }\n    else if (Pass1 === '') {\n        return res.redirect('/allergytry?Valid=Pass1');     //Redirects user to Allergy/SignUp page\n    }\n    else if (Pass2 === '') {\n        return res.redirect('/allergytry?Valid=Pass2');      //Redirects user to Allergy/SignUp page\n    }\n    else if (Pass2 !== Pass1) {\n        return res.redirect('/allergytry?Valid=PassDiff');     //Redirects user to Allergy/SignUp page\n    }\n    var SignUpQuery1 = 'SELECT UserName FROM tblAccountDetails;';    //Find all the Usernames and compare to the to the entered\n    connection.query(SignUpQuery1, function (error, results, fields) {\n        if (error) {\n            console.log(\"An error has occurred at SignUpQuery1.\");\n            console.log(error);\n        }\n        else {\n            for (var i = 0; i < results.length; i++) {\n                if (results[i] === Name) {\n                    return res.redirect('/allergytry?Valid=Name');   //Redirects user to Allergy/SignUp page\n                }\n            }\n            //Create Salt\n            function randomString(length, chars) {\n                var salt = '';\n                for (var i = length; i > 0; --i) salt += chars[Math.floor(Math.random() * chars.length)];\n                console.log(salt);\n                return salt;\n            }\n\n            var Salt = randomString(32, '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');\n\n            var ToBeHashed = Pass1 + Salt;\n            var NumHash = 0;\n\n            for (var i = 0; i < ToBeHashed.length; i++) {     //Turn to be hashed value into ascii\n                NumHash = NumHash + ToBeHashed.charCodeAt(i);\n            }\n            var hash = NumHash % 12;     //Modulus the hash\n\n            //Insert Data into database, then find the ID of the created account\n            console.log(Name);\n            console.log(Email);\n            console.log(hash);\n            console.log(Salt);\n\n            connection.query('INSERT INTO RecipeWebsite.tblAccountDetails (UserName, EmailAddress, PasswordHASH, PasswordSALT) VALUES (?, ?, ?, ?);', [Name, Email, hash, Salt], function (error, results, fields) {\n                if (error) {\n                    console.log(\"An error has occurred at SignUpQuery3.\");\n                    console.log(error);\n                }\n                else{\n                    var SignUpQuery2 = 'SELECT IDAccountDetails FROM tblAccountDetails WHERE UserName = ' + connection.escape(Name) + \";\";\n                    connection.query(SignUpQuery2, function (error, results, fields) {\n                        if (error) {\n                            console.log(\"An error has occurred at SignUpQuery2.\");\n                            console.log(error);\n                        }\n                        else{\n                            var IDAccount = results[0].IDAccountDetails;\n                            app.set('IDAccount', IDAccount);       //Set global variable\n                            //Insert Data into database if allergy info was entered, then find ID of each allergy that applies to the account\n                            console.log(IDAccount);\n                            if (AllergyType !== \"null\") {\n                                var IDAllergyGroup;\n\n                                    var AllergyQuery1 = 'SELECT IDAllergyGroup FROM tblAllergyGroup WHERE AllergyGroupName = ' + connection.escape(AllergyType);\n                                    connection.query(AllergyQuery1, function (error, results, fields) {\n                                        if (error) {\n                                            console.log(\"An error has occurred at AllergyQuery1.\");\n                                            console.log(error);\n                                        }\n                                        else{\n                                            IDAllergyGroup = results[0].IDAllergyGroup;\n                                            connection.query('INSERT INTO RecipeWebsite.tblAllergyGroupAccountDetails (IDAllergyGroup, IDAccountDetails) VALUES (?, ?);', [IDAllergyGroup, IDAccount]);\n                                            app.set('IDAllergyGroup', IDAllergyGroup);     //Set global variable\n                                            return res.redirect(301, 'http://localhost:3000/try');\n                                        }\n                                    });\n                            }\n                            else{\n                                return res.redirect(301, 'http://localhost:3000/try');\n                            }\n                        }\n                    });\n                }\n            });\n        }\n    });\n});\n\n//Comment Input Code\napp.get('/process_comment', function (req, res) {\n    response = {\n        comment: req.query.comment,\n        Rating: req.query.rating,\n        IDRecipe: req.query.IDRecipe\n    };\n    var comment = req.query.comment;   //Data from User\n    var rating = req.query.rating;\n    var IDRecipe = req.query.IDRecipe;\n    var IDAccount = req.app.get('IDAccount');\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (comment === '' && rating === undefined) {\n        return res.redirect('/commenttry?Valid=Both');     //Redirects user to the Comment page\n    }\n    else if (comment === '') {\n        return res.redirect('/commenttry?Valid=Comment');     //Redirects user to the Comment page\n    }\n    else if (rating === undefined) {\n        return res.redirect('/commenttry?Valid=Rating');     //Redirects user to the Comment page\n    }\n    else{\n        connection.query('INSERT INTO tblComment (CommentDescription, Rating, IDAccountDetails, IDRecipe) VALUES (?, ?, ?, ?);', [comment, rating, IDAccount, IDRecipe]);\n        return res.redirect('/recipetry/?IDRecipe='+IDRecipe);\n    }\n});\n\napp.get('/process_ingredient', function (req, res) {\n    response = {\n        ingredient: req.query.ingredient\n    };\n    var Ingredient = req.query.ingredient;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (Ingredient === 'null') {\n        return res.redirect('/ingredienttry?Valid=Ingredient');     //Redirects user to the In page\n    }\n    else{\n        app.set('FilterOption', 'Ingredient');\n        app.set('FilterData', Ingredient);\n        return res.redirect('/selecttry');     //Redirects user to the Select page\n    }\n});\n\napp.get('/process_searchtag', function (req, res) {\n    response = {\n        searchtag: req.query.searchtag\n    };\n    var SearchTag = req.query.searchtag;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (SearchTag === 'null') {\n        return res.redirect('/searchtagtry?Valid=SearchTag');      //Redirects user to the SearchTag page\n    }\n    else{\n        app.set('FilterOption', 'SearchTag');\n        app.set('FilterData', SearchTag);\n        return res.redirect('/selecttry');     //Redirects user to the Select page\n    }\n});\n\napp.get('/process_cuisine', function (req, res) {\n    response = {\n        cuisine: req.query.cuisine\n    };\n    var Cuisine = req.query.cuisine;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (Cuisine === 'null') {\n        return res.redirect('/cuisinetry?Valid=Cuisine');      //Redirects user to the Cuisine page\n    }\n    else{\n        app.set('FilterOption', 'Cuisine');\n        app.set('FilterData', Cuisine);\n        return res.redirect('/selecttry');     //Redirects user to the Select page\n    }\n});\n\napp.get('/process_preptime', function (req, res) {\n    response = {\n        preptime: req.query.preptime\n    };\n    var PrepTime = req.query.preptime;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (PrepTime === 'null') {\n        return res.redirect('/preptimetry?Valid=PrepTime');     //Redirects user to the Prep Time page\n    }\n    else{\n        app.set('FilterOption', 'PrepTime');\n        app.set('FilterData', PrepTime);\n        return res.redirect('/selecttry');     //Redirects user to the Select page\n    }\n});\n\napp.get('/process_type', function (req, res) {\n    response = {\n        type: req.query.type\n    };\n    var Type = req.query.type;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (Type === 'null') {\n        return res.redirect('/typetry?Valid=Type');     //Redirects user to the Type page\n    }\n    else{\n        app.set('FilterOption', 'Type');\n        app.set('FilterData', Type);\n        return res.redirect('/selecttry');     //Redirects user to the Select page\n    }\n});\n\napp.get('/process_servingsize', function (req, res) {\n    response = {\n        servingsize: req.query.servingsize\n    };\n    var ServingSize = req.query.servingsize;    //Data from User\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (ServingSize === 'null') {\n        //connection.end();\n        return res.redirect('/servingsizetry?Valid=ServingSize');      //Redirects user to the Serving Size page\n    }\n    else{\n        app.set('FilterOption', 'ServingSize');\n        app.set('FilterData', ServingSize);\n        return res.redirect('/selecttry');     //Redirects user to the Select page\n    }\n});\n\napp.get('/process_favourite', function (req, res) {\n    response = {\n        favourite: req.query.Favourite,\n        IDRecipe: req.query.IDRecipe\n    };\n    var Favourite = req.query.Favourite;    //Data from User\n    var IDRecipe = req.query.IDRecipe;\n    console.log(response);\n    var IDAccount = req.app.get('IDAccount');\n    //Not valid Input Section\n\n    if (Favourite === 'null'|| Favourite=== undefined) {\n        return res.redirect('/favouritetry?Valid=Favourite');      //Redirects user to the Favourite page\n    }\n    else{\n        connection.query('INSERT INTO tblFavourite (IDAccountDetails, IDRecipe) VALUES (?, ?);', [IDAccount, IDRecipe]);\n        return res.redirect('/recipetry/?IDRecipe='+IDRecipe);\n    }\n});\n\napp.get('/process_servingcon', function (req, res) {\n    response = {\n        serving: req.query.serving,\n        IDRecipe: req.query.IDRecipe\n    };\n    var ServingCon = req.query.serving;\n    var IDRecipe = req.query.IDRecipe;\n    console.log(response);\n\n    //Not valid Input Section\n\n    if (ServingCon === 'null'|| ServingCon === undefined) {\n        //connection.end();\n        return res.redirect('/servingcontry?Valid=ServingCon');     //Redirects user to the Serving Conversion page\n    }\n    else{\n        ServingChange = true;\n        app.set('ServingCon', ServingCon);\n        app.set('ServingChange', ServingChange);\n        return res.redirect('/recipetry/?IDRecipe='+IDRecipe);\n    }\n    //res.end(JSON.stringify(response));\n    //connection.end();\n});\n//console.log(\"GOING DOWN\");\n\napp.listen(3000, function () {\n    console.log('Go listen on port 3000')\n});"]}